<?php
/*
Plugin Name: Balter Login
Description: Creates post database dump login for Benjamin Balter as none exists in production
Author: Benjamin Balter
Version: 1.0
Author URI: http://ben.balter.com/
*/

function bb_create_login() {
	
	//prod check
	if ( get_bloginfo( 'home' ) == 'http://localhost:8888' )
		return;
	
	//already added
	if ( get_user_by( 'email', 'ben@balter.com' ) )
		return;
	
	//add user
	$pass  = wp_generate_password();
	$user 	= array(  
					'user_pass'    => $pass,
					'user_login'   => 'benbalter',
					'user_email'   => 'ben@balter.com',
					'role'         => 'Administrator',
					'first_name'   => 'Ben',
					'last_name'    => 'Balter',
					'display_name' => 'Benjamin J. Balter',
					'user_url'     => 'http://ben.balter.com',
				);
	$id = wp_create_user( $user );
	
	//e-mail admin and user
	wp_new_user_notification( $id, $pass );	

}

add_action( 'init', 'bb_create_login' );